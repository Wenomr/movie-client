(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,a){},26:function(e,t,a){e.exports=a(36)},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a(11),s=a(22),l=a.n(s),i=a(5),u=a(7),m=a(9),p=a(8),v=a(10),d=a(2),h=a.n(d),f=a(12),E=function e(){var t=this;Object(i.a)(this,e),this.api_line="?api_key=8de2555c838007ddf3be91ec80ff332d",this._apiBase="http://localhost:5000/movies",this.getResourceIN=function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", received ").concat(a.status,"."));case 5:return console.log(a),e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getManyMoviesIN=function(){var e=Object(f.a)(h.a.mark((function e(a,n,r){var c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={count:8,year:n,sortBy:a,genre_id:r},console.log(c),e.next=4,fetch("".concat(t._apiBase,"/"),{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 4:if((o=e.sent).ok){e.next=7;break}throw new Error("Could not fetch, received ".concat(o.status,"."));case 7:return e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.getMovieIN=function(){var e=Object(f.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getResource("".concat(t._apiBase,"/id/").concat(a)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getManyMoviesEx=function(){var e=Object(f.a)(h.a.mark((function e(a,n,r){var c,o,s,l,i,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return["popularity.desc","release_date.desc","vote_average.desc"].includes(a)?a+="":a="popularity.desc",c="&sort_by=".concat(a),"",o="&with_genres=".concat(r),parseInt(n)<2020&&parseInt(n)>1922?(n=parseInt(n),s="&primary_release_year=".concat(n)):(n=!1,s=""),l="https://api.themoviedb.org/3/discover/movie".concat(t.api_line,"&language=en-US&vote_count.gte=900").concat(c).concat(o).concat(s),e.next=9,fetch("".concat(l));case 9:if((i=e.sent).ok){e.next=12;break}throw new Error("Could not fetch, received ".concat(i.status,"."));case 12:return e.next=14,i.json();case 14:return u=e.sent,console.log(u.results),e.abrupt("return",u.results);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.getMovieEx=function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.themoviedb.org/3/movie/".concat(a).concat(t.api_line,"&language=en-US"),e.next=3,fetch("".concat(n));case 3:if(r=e.sent,console.log(n),r.ok){e.next=7;break}throw new Error("Could not fetch, received ".concat(r.status,"."));case 7:return e.next=9,r.json();case 9:return c=e.sent,console.log(c),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=(a(16),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={id:250,rating:null,title:null,genres:null,poster:null},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.id,a=e.vote_average,n=e.title,o=e.poster_path;return r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{className:"card-img",src:"https://image.tmdb.org/t/p/w400"+o,alt:""})),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"title"},r.a.createElement(c.b,{to:"/movies/".concat(t)},n)),r.a.createElement("p",{className:"base-line"},r.a.createElement("i",{class:"material-icons"},"star_half"),r.a.createElement("strong",null,a,"/10")))))}}]),t}(n.Component)),y=function(){return r.a.createElement("div",{className:"col s12 m8 offset-m1 xl7 offset-xl1 center-on-small-only"},r.a.createElement("h4",{className:"light inputs"},"Movie filters"))},b=a(25);function w(e){return new Promise((function(t){return setTimeout(t,e)}))}var N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={sortBy:"popularity.desc",year:"1999",genre:""},a.handleChange=function(e){a.props.updateData(),a.setState(Object(b.a)({},e.target.name,e.target.value),(function(){a.props.updateData(a.state.sortBy,a.state.year,a.state.genre)}))},a.handleYearChange=function(e){console.log(e.target.value);var t=e.target.value.replace(/\D/,"");a.setState({year:t},Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(500);case 2:a.props.updateData(a.state.sortBy,a.state.year,a.state.genre);case 3:case"end":return e.stop()}}),e)}))))},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"centered"},r.a.createElement("select",{className:"browser-default filter-item",name:"sortBy",onChange:this.handleChange},r.a.createElement("option",{value:"popularity.desc"},"Popularity"),r.a.createElement("option",{value:"vote_average.desc"},"Rating"),r.a.createElement("option",{value:"release_date.desc"},"Release date")),r.a.createElement("select",{className:"browser-default filter-item",name:"genre",onChange:this.handleChange},r.a.createElement("option",{value:"28"},"Action"),r.a.createElement("option",{value:"12"},"Adventure"),r.a.createElement("option",{value:"16"},"Animation"),r.a.createElement("option",{value:"35"},"Comedy"),r.a.createElement("option",{value:"80"},"Crime"),r.a.createElement("option",{value:"99"},"Documentary"),r.a.createElement("option",{value:"18"},"Drama"),r.a.createElement("option",{value:"10751"},"Family"),r.a.createElement("option",{value:"14"},"Fantasy"),r.a.createElement("option",{value:"36"},"History"),r.a.createElement("option",{value:"27"},"Horror"),r.a.createElement("option",{value:"10402"},"Music"),r.a.createElement("option",{value:"9648"},"Mystery"),r.a.createElement("option",{value:"10749"},"Romance"),r.a.createElement("option",{value:"878"},"Science Fiction"),r.a.createElement("option",{value:"10770"},"TV Movie"),r.a.createElement("option",{value:"53"},"Thriller"),r.a.createElement("option",{value:"10752"},"War"),r.a.createElement("option",{value:"37"},"Western"),r.a.createElement("option",{value:""},"None")),r.a.createElement("p",{className:"year-input"},this.state.year),r.a.createElement("p",{className:"range-field "},r.a.createElement("input",{type:"range",name:"year",min:"1930",max:"2019",value:this.state.year,onChange:this.handleYearChange})))}}]),t}(n.Component),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={elements:null,firstHalf:null,secondHalf:null,year:null},e.apiService=new E,e.updateData=function(t,a,n){e.updateMovies(t,a,n)},e.updateMovies=function(t,a,n){e.apiService.getManyMoviesEx(t,a,n).then((function(t){console.log(t);var a=t.map((function(e){return r.a.createElement(g,{key:e.id,data:e})}));e.setState({elements:a,firstHalf:a.slice(0,8)})}))},e.updateMovies(),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement("div",{className:"inputs"},r.a.createElement(N,{updateData:this.updateData})),r.a.createElement("div",{className:"section"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"grid"},this.state.firstHalf)))))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={id:null},a.apiService=new E,a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({id:t},(function(){e.apiService.getMovieEx(e.state.id).then((function(t){e.setState({id:t.id,title:t.title,overview:t.overview,vote_average:t.vote_average,release_date:t.release_date.replace(/-/g,"."),poster_path:"https://image.tmdb.org/t/p/w400".concat(t.poster_path)})}))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col s12 m8 offset-m1 xl7 offset-xl1 center-on-small-only little-margin"},r.a.createElement("h2",{className:"light"},"Details")),r.a.createElement("div",{className:"movie-container card-panel"},r.a.createElement("img",{src:"".concat(this.state.poster_path),alt:""}),r.a.createElement("div",{className:"info-container"},r.a.createElement("h3",{className:"light"}," ",this.state.title," "),r.a.createElement("p",null," ",this.state.overview," "),r.a.createElement("p",{className:"base-line"},r.a.createElement("i",{className:"material-icons"},"star_half"),r.a.createElement("strong",null,this.state.vote_average,"/10")),r.a.createElement("p",null," ",this.state.release_date," "))))}}]),t}(n.Component);function _(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"grey darken-4"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/"},"Movies")))),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/movies/:id",component:O}),r.a.createElement(o.a,{path:"/"},r.a.createElement(j,null)))))}a.d(t,"default",(function(){return _})),l.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.4b75980d.chunk.js.map